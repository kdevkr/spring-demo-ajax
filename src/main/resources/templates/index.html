<!doctype html>
<html lang="ko">
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
	<title>Spring Demo Ajax with axios</title>
</head>
<body>
<div id="app">
	<div class="container-fluid">
		<div class="jumbotron jumbotron-fluid">
			<div class="container">
				<h1 class="display-4">{{ appInfo.title }}</h1>
				<ul class="lead">
					<li v-for="(dependency, idx) in appInfo.dependencies" :key="idx">{{ dependency }}</li>
				</ul>
			</div>
		</div>
	</div>

	<div class="container-fluid">
		<div class="row">
			<div class="col-md-2">
				<form v-for="(testCase, idx) in testCaseList" :key="idx">
					<div class="mb-1"><button type="button" class="btn btn-primary" @click="testCase.click">{{testCase.title}}</button></div>
				</form>
			</div>
			<div class="col-md-10">
				<div id="response-panel" class="border-success">
					<h3 class="display-5">Response</h3>
					<hr/>
					<div class="response-detail">
						<div v-if="error">
							<p>{{error.data}}</p>
							<p class="text-danger">{{error.description}}</p>
						</div>
						<div v-else>
							{{response}}
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>
<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
	$(document).ready(() => {
		var app = new Vue({
			el: '#app',
			data() {
				return {
					appInfo: {
						title: 'Spring Demo Ajax - Test Case',
						dependencies: [
							'Spring boot 2.3.3',
							'com.fasterxml.jackson 2.11.2',
							'Axios'
						],
					},
					testCaseList: [],
					error: undefined,
					response: undefined
				}
			},
			mounted() {
				console.log(this)
				this.generateTestCaseList()
			},
			methods: {
				generateTestCaseList() {
					this.testCaseList = [
						{ title: 'TEST_001', description: '', click: this.TEST_001, progress: undefined, result: undefined},
						{ title: 'TEST_001_JSON', description: '', click: this.TEST_001_JSON, progress: undefined, result: undefined},
						{ title: 'TEST_002', description: '', click: this.TEST_002, progress: undefined, result: undefined},
						{ title: 'TEST_003', description: '', click: this.TEST_003, progress: undefined, result: undefined},
						{ title: 'TEST_004', description: '', click: this.TEST_004, progress: undefined, result: undefined},
						{ title: 'TEST_005', description: '', click: this.TEST_005, progress: undefined, result: undefined},
						{ title: 'TEST_006', description: '', click: this.TEST_006, progress: undefined, result: undefined},
						{ title: 'TEST_007', description: '', click: this.TEST_007, progress: undefined, result: undefined},
						{ title: 'TEST_008', description: '', click: this.TEST_008, progress: undefined, result: undefined},
					]
				},
				TEST_001() {
					this.error = undefined
					this.response = undefined

					var params = new Object();
					params.username = "kdevkr";
					params.password = "kdevpass";

					axios.get('/TEST_001', {params: params}).then(res => {
						this.response = res.data
					}).catch(error => {
						this.error = {status: error.response.data.status, description: error.response.data.message, data:error.response.data}
					})
				},
				TEST_001_JSON() {
					this.error = undefined
					this.response = undefined

					var params = new Object();
					params.username = "kdevkr";
					params.password = "kdevpass";

					// Warning...!
					// https://github.com/axios/axios/issues/755
					axios.get('/TEST_001_JSON', {
						params: params,
						headers: {'Content-Type':'application/json'}
					}).then(res => {
						console.log(res.data)
					}).catch(error => {
						this.error = {status: error.response.data.status, description: 'The server requires Content-Type upon API request, but Axios removes the Content-Type header if the GET request cannot contain the request body and there is no request body.', data:error.response.data}
					})
				},
				TEST_002() {
					this.error = undefined
					this.response = undefined

					var params = new Object();
					params.username = "kdevkr";
					params.password = "kdevpass";

					axios.get('/TEST_002', {params: params}).then(res => {
						this.response = res.data
					}).catch(error => {
						this.error = {status: error.response.data.status, description: error.response.data.message, data:error.response.data}
					})
				},
				TEST_003() {
					this.error = undefined
					this.response = undefined

					var params = new Object();
					params.username = "kdevkr";
					params.password = "kdevpass";

					axios.get('/TEST_003', {params: params}).then(res => {
						this.response = res.data
					}).catch(error => {
						this.error = {status: error.response.data.status, description: 'An error is generated because there is no view revolver to handle the List object.', data:error.response.data}
					})
				},
				TEST_004() {
					this.error = undefined
					this.response = undefined

					var data = new Object();
					data.username = "kdevkr";
					data.password = "kdevpass";

					axios.put('/TEST_004', data).then(res => {
						this.response = res.data
					}).catch(error => {
						this.error = {status: error.response.data.status, description: error.response.data.message, data:error.response.data}
					})
				},
				TEST_005() {
					this.error = undefined
					this.response = undefined

					var data = new Object();
					data.username = "kdevkr";
					data.password = "kdevpass";

					axios.get('/TEST_005', {data: data}).then(res => {
						this.response = res.data
					}).catch(error => {
						this.error = {status: error.response.data.status, description: 'GET requests cannot contain data in the request body..', data:error.response.data}
					})
				},
				TEST_006() {
					this.error = undefined
					this.response = undefined

					var data = new Object();
					data.username = "kdevkr";
					data.password = "kdevpass";

					axios.post('/TEST_006', data).then(res => {
						this.response = res.data
					}).catch(error => {
						this.error = {status: error.response.data.status, description: error.response.data.message, data:error.response.data}
					})
				},
				TEST_007() {
					this.error = undefined
					this.response = undefined

					var data = new Object();
					data.username = "kdevkr";
					data.password = "kdevpass";

					axios.post('/TEST_007', data).then(res => {
						this.response = res.data
					}).catch(error => {
						this.error = {status: error.response.data.status, description: error.response.data.message, data:error.response.data}
					})
				},
				TEST_008() {
					this.error = undefined
					this.response = undefined

					var data = new Object();
					data.username = "kdevkr";
					data.password = "kdevpass";

					axios.post('/TEST_008', data, {params: {param: 'paramExt'}}).then(res => {
						this.response = res.data
					}).catch(error => {
						this.error = {status: error.response.data.status, description: error.response.data.message, data:error.response.data}
					})
				},
			}
		})
	})
</script>
</body>
</html>